(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d2198018"],{"2f65":function(t,e,s){var r={"./anonymous.svg":"2456","./newUser.svg":"6364","./web.svg":"c31f"};function n(t){var e=o(t);return s(e)}function o(t){if(!s.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}n.keys=function(){return Object.keys(r)},n.resolve=o,t.exports=n,n.id="2f65"},"43a6":function(t,e,s){"use strict";var r=s("94bb"),n=s.n(r);n.a},4787:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"feed"}},[t.checkUser?s("form",{attrs:{id:"form-new-post"},on:{submit:function(e){return e.preventDefault(),t.newPost(e)}}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newPostText,expression:"newPostText"}],staticClass:"input-text",attrs:{id:"new-post-text",rows:"3",maxlength:"3000",placeholder:"Что интересного можете рассказать?"},domProps:{value:t.newPostText},on:{input:function(e){e.target.composing||(t.newPostText=e.target.value)}}}),t._v(" "),s("input",{staticClass:"custom-button",attrs:{type:"submit",id:"new-post-submit"}})]):t._e(),t._l(t.getPosts,(function(e){return s("div",{key:e.id,staticClass:"container-white post-generic"},[s("div",{staticClass:"post-author-info"},[s("div",{staticClass:"post-author-photo-block"},[s("img",{attrs:{src:t.getImage(e.user),width:"48"}})]),s("div",{staticClass:"post-author-name-date-block"},[s("router-link",{staticClass:"link-user",attrs:{to:{name:"UserProfile",params:{id:e.user}}}},[t._v(" "+t._s(t.getAuthorById(e.user).name)+" "+t._s(t.getAuthorById(e.user).lastName)+" ")]),s("p",[t._v(" "+t._s(t.getRelativeDate(e.dateTimeAdded))+" ")])],1)]),s("p",{staticClass:"post-text"},[t._v(t._s(e.text))])])}))],2)},n=[],o=(s("fb6a"),s("d3b7"),s("25f0"),s("f3db")),i=s("d719"),a=s.n(i),u={computed:{getAuthors:function(){return this.$store.getters.getUserList},checkUser:function(){return this.$store.getters.checkUser},getPosts:function(){return this.$store.getters.getPosts.slice().reverse()}},methods:{getAuthorById:function(t){return this.$store.getters.getUserById(t)},getImage:function(t){var e=this.getAuthorById(t);if(!e.image){var r=s("2f65");return r("./anonymous.svg")}},newPost:function(){var t=this;if(this.newPostText.length<3)a.a.error("Нельзя опубликовать пост, длиной менее 3 символов.");else{var e=new o["a"](this.newPostText,(new Date).toString(),this.newPostImages,!1,0,0,this.$store.getters.user.id);this.$store.dispatch("newPost",e).then((function(){t.sumbitStatus="ok",t.$router.push("/"),a.a.success("Пост опубликован."),t.newPostText="",t.newPostImages=[]})).catch((function(e){t.sumbitStatus=e.message}))}},getRelativeDate:function(t){var e=new Date(t),s=new Date,r=s-e,n=" мин. назад";if(r=Math.round(r/1e3/60),r>=60){if(r/=60,r=Math.floor(r),n=" ч. назад",r>=24)return e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear()+" "+(e.getHours()<10?"0":"")+e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()}else if(0===r)return"Только что";return r+n}},data:function(){return{newPostText:"",newPostImages:[]}}},c=u,d=(s("43a6"),s("2877")),f=Object(d["a"])(c,r,n,!1,null,"2079d83d",null);e["default"]=f.exports},"94bb":function(t,e,s){},fb6a:function(t,e,s){"use strict";var r=s("23e7"),n=s("861d"),o=s("e8b5"),i=s("23cb"),a=s("50c4"),u=s("fc6a"),c=s("8418"),d=s("b622"),f=s("1dde"),l=s("ae40"),g=f("slice"),h=l("slice",{ACCESSORS:!0,0:0,1:2}),v=d("species"),m=[].slice,p=Math.max;r({target:"Array",proto:!0,forced:!g||!h},{slice:function(t,e){var s,r,d,f=u(this),l=a(f.length),g=i(t,l),h=i(void 0===e?l:e,l);if(o(f)&&(s=f.constructor,"function"!=typeof s||s!==Array&&!o(s.prototype)?n(s)&&(s=s[v],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return m.call(f,g,h);for(r=new(void 0===s?Array:s)(p(h-g,0)),d=0;g<h;g++,d++)g in f&&c(r,d,f[g]);return r.length=d,r}})}}]);
//# sourceMappingURL=chunk-d2198018.1a1bdf62.js.map