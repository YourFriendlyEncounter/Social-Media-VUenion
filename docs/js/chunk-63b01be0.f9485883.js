(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63b01be0"],{1185:function(t,e,s){},2532:function(t,e,s){"use strict";var r=s("23e7"),i=s("5a34"),n=s("1d80"),o=s("ab13");r({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(n(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},"2f65":function(t,e,s){var r={"./anonymous.svg":"2456","./newUser.svg":"6364","./web.svg":"c31f"};function i(t){var e=n(t);return s(e)}function n(t){if(!s.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=n,t.exports=i,i.id="2f65"},"3ca3":function(t,e,s){"use strict";var r=s("6547").charAt,i=s("69f3"),n=s("7dd0"),o="String Iterator",a=i.set,c=i.getterFor(o);n(String,"String",(function(t){a(this,{type:o,string:String(t),index:0})}),(function(){var t,e=c(this),s=e.string,i=e.index;return i>=s.length?{value:void 0,done:!0}:(t=r(s,i),e.index+=t.length,{value:t,done:!1})}))},"44e7":function(t,e,s){var r=s("861d"),i=s("c6b6"),n=s("b622"),o=n("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},"475d":function(t,e,s){"use strict";var r=s("4aba"),i=s.n(r);i.a},4787:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"feed"}},[t.checkUser?s("form",{attrs:{id:"form-new-post"},on:{submit:function(e){return e.preventDefault(),t.newPost(e)}}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newPostText,expression:"newPostText"}],staticClass:"input-text",attrs:{id:"new-post-text",rows:"3",maxlength:"3000",placeholder:"Что интересного можете рассказать?"},domProps:{value:t.newPostText},on:{input:function(e){e.target.composing||(t.newPostText=e.target.value)}}}),t._v(" "),s("input",{staticClass:"custom-button",attrs:{type:"submit",id:"new-post-submit"}})]):t._e(),t._l(t.getPosts,(function(e){return s("div",{key:e.id,staticClass:"container-white post-generic"},[s("div",{staticClass:"post-author-info"},[s("div",{staticClass:"post-author-photo-block"},[s("img",{attrs:{src:t.getImageURL(e.user).link,width:"48",height:"48"}})]),s("div",{staticClass:"post-author-name-date-block"},[s("router-link",{staticClass:"link-user",attrs:{to:{name:"UserProfile",params:{id:e.user}}}},[t._v(" "+t._s(t.getAuthorById(e.user).name)+" "+t._s(t.getAuthorById(e.user).lastName)+" ")]),s("p",[t._v(" "+t._s(t.getRelativeDate(e.dateTimeAdded))+" ")])],1)]),s("p",{staticClass:"post-text"},[t._v(t._s(e.text))]),s("Rating",{attrs:{post:e}})],1)}))],2)},i=[],n=(s("4de4"),s("fb6a"),s("d3b7"),s("25f0"),s("3ca3"),s("9911"),s("ddb0"),s("96cf"),s("1da1")),o=s("f3db"),a=s("d719"),c=s.n(a),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("hr"),r("div",{staticClass:"div-likes-dislikes"},[r("button",{staticClass:"button-rate",class:{"is-post-rated":t.isPostLiked(t.post)},on:{click:function(e){return t.likePost(t.post)}}},[t._v(t._s(t.getRatesCount(t.post.liked))+" "),r("img",{staticStyle:{"margin-left":"4px"},attrs:{src:s("8e44"),width:"24"}})]),r("button",{staticClass:"button-rate",class:{"is-post-disliked":t.isPostDisliked(t.post)},on:{click:function(e){return t.dislikePost(t.post)}}},[t._v(t._s(t.getRatesCount(t.post.disliked))+" "),r("img",{staticStyle:{"margin-left":"4px"},attrs:{src:s("fcd3"),width:"24"}})])]),r("hr")])},d=[],l=(s("caad"),s("2532"),{methods:{getRatesCount:function(t){return void 0==t?0:t.length},isPostLiked:function(t){return!(!t.liked||!this.checkUser)&&t.liked.includes(this.getUser.id)},isPostDisliked:function(t){return!(!t.disliked||!this.checkUser)&&t.disliked.includes(this.getUser.id)},likePost:function(t){if(this.checkUser){this.isPostDisliked(t)&&this.dislikePost(t);var e=!1;e=!!this.isPostLiked(t);var s=this.getUser.id;this.$store.dispatch("changeLikes",{post:t,userID:s,isToRemove:e})}else c.a.error("Авторизуйтесь, чтобы оставлять отзывы.")},dislikePost:function(t){if(this.checkUser){this.isPostLiked(t)&&this.likePost(t);var e=!1;e=!!this.isPostDisliked(t);var s=this.getUser.id;this.$store.dispatch("changeDislikes",{post:t,userID:s,isToRemove:e})}else c.a.error("Авторизуйтесь, чтобы оставлять отзывы.")}},computed:{getUser:function(){return this.$store.getters.user},checkUser:function(){return this.$store.getters.checkUser}},props:{post:Object}}),f=l,h=(s("780e"),s("2877")),g=Object(h["a"])(f,u,d,!1,null,"005b313a",null),v=g.exports,p=s("59ca"),m=s.n(p),k={components:{Rating:v},computed:{getAuthors:function(){return this.$store.getters.getUserList},checkUser:function(){return this.$store.getters.checkUser},getUser:function(){return this.$store.getters.user},getPosts:function(){return this.$store.getters.getPosts.slice().reverse()}},methods:{getAuthorById:function(t){return this.$store.getters.getUserById(t)},getImageURL:function(t){var e=this.userAvatarImageURLs.slice().filter((function(e){return e.id==t}))[0];if(!e){var r=s("2f65");e={id:"",link:r("./anonymous.svg")}}return e},loadImageURLs:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.commit("setLoadingFiles",!0),s=t.getPosts,r=0;case 3:if(!(r<s.length)){e.next=15;break}if(t.getAuthorById(s[r].user).image){e.next=6;break}return e.abrupt("continue",12);case 6:return e.prev=6,e.delegateYield(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={id:s[r].user,link:""},e.next=3,m.a.storage().ref().child("userAvatars/"+s[r].user).getDownloadURL().then((function(e){i.link=e,t.userAvatarImageURLs.push(i)}));case 3:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:e.next=12;break;case 10:e.prev=10,e.t1=e["catch"](6);case 12:r++,e.next=3;break;case 15:t.$store.commit("setLoadingFiles",!1);case 16:case"end":return e.stop()}}),e,null,[[6,10]])})))()},newPost:function(){var t=this;if(this.newPostText.length<3)c.a.error("Нельзя опубликовать пост, длиной менее 3 символов.");else{var e=new o["a"];e.text=this.newPostText,e.dateTimeAdded=(new Date).toString(),e.images=this.newPostImages,e.edited=!1,e.liked=[],e.disliked=[],e.user=this.$store.getters.user.id,this.$store.dispatch("newPost",e).then((function(){t.sumbitStatus="ok",t.$router.push("/"),c.a.success("Пост опубликован."),t.newPostText="",t.newPostImages=[]})).catch((function(e){t.sumbitStatus=e.message}))}},getRelativeDate:function(t){var e=new Date(t),s=new Date,r=s-e,i=" мин. назад";if(r=Math.round(r/1e3/60),r>=60){if(r/=60,r=Math.floor(r),i=" ч. назад",r>=24)return e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear()+" "+(e.getHours()<10?"0":"")+e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()}else if(0===r)return"Только что";return r+i}},data:function(){return{newPostText:"",newPostImages:[],userAvatarImageURLs:[]}},beforeMount:function(){this.loadImageURLs()}},b=k,w=(s("475d"),Object(h["a"])(b,r,i,!1,null,"7d6c4994",null));e["default"]=w.exports},"4aba":function(t,e,s){},"5a34":function(t,e,s){var r=s("44e7");t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},6547:function(t,e,s){var r=s("a691"),i=s("1d80"),n=function(t){return function(e,s){var n,o,a=String(i(e)),c=r(s),u=a.length;return c<0||c>=u?t?"":void 0:(n=a.charCodeAt(c),n<55296||n>56319||c+1===u||(o=a.charCodeAt(c+1))<56320||o>57343?t?a.charAt(c):n:t?a.slice(c,c+2):o-56320+(n-55296<<10)+65536)}};t.exports={codeAt:n(!1),charAt:n(!0)}},"780e":function(t,e,s){"use strict";var r=s("1185"),i=s.n(r);i.a},ab13:function(t,e,s){var r=s("b622"),i=r("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(s){try{return e[i]=!1,"/./"[t](e)}catch(r){}}return!1}},caad:function(t,e,s){"use strict";var r=s("23e7"),i=s("4d64").includes,n=s("44d2"),o=s("ae40"),a=o("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:!a},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n("includes")},ddb0:function(t,e,s){var r=s("da84"),i=s("fdbc"),n=s("e260"),o=s("9112"),a=s("b622"),c=a("iterator"),u=a("toStringTag"),d=n.values;for(var l in i){var f=r[l],h=f&&f.prototype;if(h){if(h[c]!==d)try{o(h,c,d)}catch(v){h[c]=d}if(h[u]||o(h,u,l),i[l])for(var g in n)if(h[g]!==n[g])try{o(h,g,n[g])}catch(v){h[g]=n[g]}}}},fb6a:function(t,e,s){"use strict";var r=s("23e7"),i=s("861d"),n=s("e8b5"),o=s("23cb"),a=s("50c4"),c=s("fc6a"),u=s("8418"),d=s("b622"),l=s("1dde"),f=s("ae40"),h=l("slice"),g=f("slice",{ACCESSORS:!0,0:0,1:2}),v=d("species"),p=[].slice,m=Math.max;r({target:"Array",proto:!0,forced:!h||!g},{slice:function(t,e){var s,r,d,l=c(this),f=a(l.length),h=o(t,f),g=o(void 0===e?f:e,f);if(n(l)&&(s=l.constructor,"function"!=typeof s||s!==Array&&!n(s.prototype)?i(s)&&(s=s[v],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return p.call(l,h,g);for(r=new(void 0===s?Array:s)(m(g-h,0)),d=0;h<g;h++,d++)h in l&&u(r,d,l[h]);return r.length=d,r}})}}]);
//# sourceMappingURL=chunk-63b01be0.f9485883.js.map