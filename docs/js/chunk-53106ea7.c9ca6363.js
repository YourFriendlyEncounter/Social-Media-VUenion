(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53106ea7"],{1185:function(t,e,s){},2532:function(t,e,s){"use strict";var i=s("23e7"),r=s("5a34"),n=s("1d80"),o=s("ab13");i({target:"String",proto:!0,forced:!o("includes")},{includes:function(t){return!!~String(n(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},"2f65":function(t,e,s){var i={"./anonymous.svg":"2456","./newUser.svg":"6364","./web.svg":"c31f"};function r(t){var e=n(t);return s(e)}function n(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=n,t.exports=r,r.id="2f65"},"44e7":function(t,e,s){var i=s("861d"),r=s("c6b6"),n=s("b622"),o=n("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},4787:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"feed"}},[t.checkUser?s("form",{attrs:{id:"form-new-post"},on:{submit:function(e){return e.preventDefault(),t.newPost(e)}}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newPostText,expression:"newPostText"}],staticClass:"input-text",attrs:{id:"new-post-text",rows:"3",maxlength:"3000",placeholder:"Что интересного можете рассказать?"},domProps:{value:t.newPostText},on:{input:function(e){e.target.composing||(t.newPostText=e.target.value)}}}),t._v(" "),s("input",{staticClass:"custom-button",attrs:{type:"submit",id:"new-post-submit"}})]):t._e(),t._l(t.getPosts,(function(e){return s("div",{key:e.id,staticClass:"container-white post-generic"},[s("div",{staticClass:"post-author-info"},[s("div",{staticClass:"post-author-photo-block"},[s("img",{attrs:{src:t.getImage(e.user),width:"48"}})]),s("div",{staticClass:"post-author-name-date-block"},[s("router-link",{staticClass:"link-user",attrs:{to:{name:"UserProfile",params:{id:e.user}}}},[t._v(" "+t._s(t.getAuthorById(e.user).name)+" "+t._s(t.getAuthorById(e.user).lastName)+" ")]),s("p",[t._v(" "+t._s(t.getRelativeDate(e.dateTimeAdded))+" ")])],1)]),s("p",{staticClass:"post-text"},[t._v(t._s(e.text))]),s("Rating",{attrs:{post:e}})],1)}))],2)},r=[],n=(s("fb6a"),s("d3b7"),s("25f0"),s("f3db")),o=s("d719"),a=s.n(o),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("hr"),i("div",{staticClass:"div-likes-dislikes"},[i("button",{staticClass:"button-rate",class:{"is-post-rated":t.isPostLiked(t.post)},on:{click:function(e){return t.likePost(t.post)}}},[t._v(t._s(t.getRatesCount(t.post.liked))+" "),i("img",{staticStyle:{"margin-left":"4px"},attrs:{src:s("8e44"),width:"24"}})]),i("button",{staticClass:"button-rate",class:{"is-post-disliked":t.isPostDisliked(t.post)},on:{click:function(e){return t.dislikePost(t.post)}}},[t._v(t._s(t.getRatesCount(t.post.disliked))+" "),i("img",{staticStyle:{"margin-left":"4px"},attrs:{src:s("fcd3"),width:"24"}})])]),i("hr")])},u=[],d=(s("caad"),s("2532"),{methods:{getRatesCount:function(t){return void 0==t?0:t.length},isPostLiked:function(t){return!(!t.liked||!this.checkUser)&&t.liked.includes(this.getUser.id)},isPostDisliked:function(t){return!(!t.disliked||!this.checkUser)&&t.disliked.includes(this.getUser.id)},likePost:function(t){if(this.checkUser){this.isPostDisliked(t)&&this.dislikePost(t);var e=!1;e=!!this.isPostLiked(t);var s=this.getUser.id;this.$store.dispatch("changeLikes",{post:t,userID:s,isToRemove:e})}else a.a.error("Авторизуйтесь, чтобы оставлять отзывы.")},dislikePost:function(t){if(this.checkUser){this.isPostLiked(t)&&this.likePost(t);var e=!1;e=!!this.isPostDisliked(t);var s=this.getUser.id;this.$store.dispatch("changeDislikes",{post:t,userID:s,isToRemove:e})}else a.a.error("Авторизуйтесь, чтобы оставлять отзывы.")}},computed:{getUser:function(){return this.$store.getters.user},checkUser:function(){return this.$store.getters.checkUser}},props:{post:Object}}),l=d,h=(s("780e"),s("2877")),f=Object(h["a"])(l,c,u,!1,null,"005b313a",null),g=f.exports,p={components:{Rating:g},computed:{getAuthors:function(){return this.$store.getters.getUserList},checkUser:function(){return this.$store.getters.checkUser},getUser:function(){return this.$store.getters.user},getPosts:function(){return this.$store.getters.getPosts.slice().reverse()}},methods:{getAuthorById:function(t){return this.$store.getters.getUserById(t)},getImage:function(t){var e=this.getAuthorById(t);if(!e.image){var i=s("2f65");return i("./anonymous.svg")}},newPost:function(){var t=this;if(this.newPostText.length<3)a.a.error("Нельзя опубликовать пост, длиной менее 3 символов.");else{var e=new n["a"];e.text=this.newPostText,e.dateTimeAdded=(new Date).toString(),e.images=this.newPostImages,e.edited=!1,e.liked=[],e.disliked=[],e.user=this.$store.getters.user.id,this.$store.dispatch("newPost",e).then((function(){t.sumbitStatus="ok",t.$router.push("/"),a.a.success("Пост опубликован."),t.newPostText="",t.newPostImages=[]})).catch((function(e){t.sumbitStatus=e.message}))}},getRelativeDate:function(t){var e=new Date(t),s=new Date,i=s-e,r=" мин. назад";if(i=Math.round(i/1e3/60),i>=60){if(i/=60,i=Math.floor(i),r=" ч. назад",i>=24)return e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear()+" "+(e.getHours()<10?"0":"")+e.getHours()+":"+(e.getMinutes()<10?"0":"")+e.getMinutes()}else if(0===i)return"Только что";return i+r}},data:function(){return{newPostText:"",newPostImages:[]}}},v=p,m=(s("e044"),Object(h["a"])(v,i,r,!1,null,"93be0a4a",null));e["default"]=m.exports},"5a34":function(t,e,s){var i=s("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"780e":function(t,e,s){"use strict";var i=s("1185"),r=s.n(i);r.a},"81c5":function(t,e,s){},ab13:function(t,e,s){var i=s("b622"),r=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(s){try{return e[r]=!1,"/./"[t](e)}catch(i){}}return!1}},caad:function(t,e,s){"use strict";var i=s("23e7"),r=s("4d64").includes,n=s("44d2"),o=s("ae40"),a=o("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!a},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("includes")},e044:function(t,e,s){"use strict";var i=s("81c5"),r=s.n(i);r.a},fb6a:function(t,e,s){"use strict";var i=s("23e7"),r=s("861d"),n=s("e8b5"),o=s("23cb"),a=s("50c4"),c=s("fc6a"),u=s("8418"),d=s("b622"),l=s("1dde"),h=s("ae40"),f=l("slice"),g=h("slice",{ACCESSORS:!0,0:0,1:2}),p=d("species"),v=[].slice,m=Math.max;i({target:"Array",proto:!0,forced:!f||!g},{slice:function(t,e){var s,i,d,l=c(this),h=a(l.length),f=o(t,h),g=o(void 0===e?h:e,h);if(n(l)&&(s=l.constructor,"function"!=typeof s||s!==Array&&!n(s.prototype)?r(s)&&(s=s[p],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return v.call(l,f,g);for(i=new(void 0===s?Array:s)(m(g-f,0)),d=0;f<g;f++,d++)f in l&&u(i,d,l[f]);return i.length=d,i}})}}]);
//# sourceMappingURL=chunk-53106ea7.c9ca6363.js.map