{"version":3,"sources":["webpack:///./src/views/PersonalPage.vue?a1ec","webpack:///src/views/PersonalPage.vue","webpack:///./src/views/PersonalPage.vue?46ab","webpack:///./src/views/PersonalPage.vue?3ccd","webpack:///./src/views/PersonalPage.vue?72de"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticStyle","imageURL","staticClass","on","editProfile","_v","_e","_s","user","name","lastName","getInfo","status","getBirthDate","about","id","isUserMe","allowWallPublications","allowCommentsOnWall","staticRenderFns","component"],"mappings":"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","file":"js/chunk-872c0b66.ecb11c58.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.user)?_c('div',{attrs:{\"id\":\"personal-page\"}},[_c('div',{attrs:{\"id\":\"personal-page-top\"}},[_c('div',{attrs:{\"id\":\"personal-page-image\"}},[_c('img',{staticStyle:{\"min-height\":\"128\",\"max-height\":\"300\"},attrs:{\"id\":\"img-avatar\",\"width\":\"200\",\"src\":_vm.imageURL}}),(_vm.isUserMe)?_c('button',{staticClass:\"custom-button\",attrs:{\"id\":\"button-edit-profile\"},on:{\"click\":_vm.editProfile}},[_vm._v(\" Редактировать профиль\")]):_vm._e()]),_c('div',{attrs:{\"id\":\"personal-page-text-info\"}},[_c('h2',[_vm._v(\" \"+_vm._s(_vm.user.name)+\" \"+_vm._s(_vm.user.lastName))]),_c('p',[_vm._v(\" \"+_vm._s(_vm.getInfo.status)+\" \")]),(_vm.user.showDateOfBirth)?_c('p',[_vm._v(\" \"+_vm._s(_vm.getBirthDate)+\" \")]):_vm._e()])]),_c('h2',[_vm._v(\"О себе:\")]),_c('p',[_vm._v(\" \"+_vm._s(_vm.getInfo.about)+\" \")]),_c('h2',{staticStyle:{\"margin-bottom\":\"0.5rem\"}},[_vm._v(\"Лента: \")]),_c('PostSection',{attrs:{\"field\":_vm.user.id,\"canDelete\":_vm.isUserMe,\"allowPosting\":_vm.user.allowWallPublications || _vm.isUserMe,\"allowCommentsOnWall\":_vm.user.allowCommentsOnWall}})],1):_c('div',{staticClass:\"div-loading\"},[_c('div',{staticClass:\"loading-inside\"},[_c('Loading',{attrs:{\"displayWhatLoading\":false}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div id=\"personal-page\" v-if=\"user\">\r\n        <div id=\"personal-page-top\">\r\n            <div id=\"personal-page-image\">\r\n                <img id=\"img-avatar\" width=\"200\" :src=\"imageURL\" style=\"min-height: 128; max-height: 300;\">\r\n                <button \r\n                v-if=\"isUserMe\" \r\n                id=\"button-edit-profile\" \r\n                class=\"custom-button\"\r\n                @click=\"editProfile\">\r\n                Редактировать профиль</button>\r\n            </div>\r\n            <div id=\"personal-page-text-info\">\r\n                <h2> {{ user.name }} {{ user.lastName }}</h2>\r\n                <p> {{ getInfo.status }} </p>\r\n                <p v-if=\"user.showDateOfBirth\"> {{ getBirthDate }} </p>\r\n            </div>\r\n        </div>\r\n        <h2>О себе:</h2>\r\n        <p> {{ getInfo.about }} </p>\r\n        <h2 style=\"margin-bottom: 0.5rem;\">Лента: </h2>\r\n        <PostSection \r\n        :field=\"user.id\" \r\n        :canDelete=\"isUserMe\"\r\n        :allowPosting=\"user.allowWallPublications || isUserMe\" \r\n        :allowCommentsOnWall=\"user.allowCommentsOnWall\"/>\r\n    </div>\r\n    <div v-else class=\"div-loading\">\r\n        <div class=\"loading-inside\">\r\n        <Loading :displayWhatLoading=\"false\" />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport PostSection from '../components/PostSection'\r\nimport Loading from '../components/Loading.vue'\r\nimport Message from 'vue-m-message'\r\n\r\nexport default {\r\n    components: {\r\n        PostSection,\r\n        Loading\r\n    },\r\n    computed: {\r\n        getAuthors() {\r\n            return this.$store.getters.getUserList;\r\n        },\r\n        getInfo() {\r\n            let tempUser = {}\r\n            tempUser.about = this.user.about;\r\n            if(!tempUser.about)\r\n                tempUser.about = \"Подробная информация о себе отсутствует.\"\r\n\r\n            tempUser.status = this.user.status;\r\n            if(!tempUser.status)\r\n                tempUser.status = \"Статус отсутствует.\"\r\n\r\n            return tempUser;\r\n        },\r\n        isUserMe(){\r\n            let currentUser = this.$store.getters.user\r\n            if(!currentUser){\r\n                return false\r\n            }\r\n            return this.id == currentUser.id\r\n        },\r\n        getBirthDate() {\r\n            let date = new Date(this.user.birthDate)\r\n            let difference = Math.floor(((new Date) - date.getTime()) / 31536000000);\r\n            if(difference < 0){\r\n                return \"Родится \" + date.getDate() + \".\" + (date.getMonth() + 1) + \".\" + date.getFullYear() + \" (через \" + (-difference - 1) + \" \" + this.getYearProperly(-difference - 1) + \")\";\r\n            }\r\n            return date.getDate() + \".\" + (date.getMonth() + 1) + \".\" + date.getFullYear() + \" (\" + difference + \" \" + this.getYearProperly(difference) + \")\";\r\n        },\r\n        getLoadedUsers() {\r\n            return this.$store.getters.getUserList;\r\n        }\r\n    },\r\n    methods: {\r\n        getYearProperly(years){\r\n            if(years % 10 == 1)\r\n                return \"год\"\r\n            else if((years % 10 == 2 || years % 10 == 3 || years % 10 == 4) && (years % 100 - years % 10) / 10 != 1)\r\n                return \"года\"\r\n            else return \"лет\"\r\n        },\r\n        editProfile() {\r\n            this.$router.push({ name: \"EditProfile\", params: { id: this.id }})\r\n        },\r\n        async setImageURL(){\r\n            if(!this.user.image)\r\n            {\r\n                let images = require.context('../assets/', false, /\\.svg$/);\r\n                this.imageURL = images(\"./anonymous.svg\")\r\n            }\r\n            else{\r\n                let URL = this.$store.getters.getLoadedUserAvatarURLs.find(u => u.id == this.user.id)\r\n                // Если ссылка уже была загружена ранее.\r\n                if(URL){\r\n                    this.imageURL = URL.link\r\n                }\r\n                else{\r\n                    let link = 'userAvatars/' + this.id;\r\n                    let newLink = await this.$store.dispatch('getImage', { link: link })\r\n                    \r\n                    this.imageURL = newLink\r\n                }\r\n            }\r\n        },\r\n        async setCurrentPageUser() {\r\n            if(this.getLoadedUsers.some(u => u.id == this.id)){\r\n                this.user = this.$store.getters.getUserById(this.id);\r\n            }\r\n            else {\r\n                let id = this.id;\r\n                this.user = await this.$store.dispatch('loadUserInfo', {userID: id})\r\n            }\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            user: null,\r\n            imageURL: \"\"\r\n        }\r\n    },\r\n    props: {\r\n        id: String\r\n    },\r\n    created() {\r\n        this.setCurrentPageUser().then(() => {\r\n            if(this.user == null){\r\n                this.$router.go(-1);\r\n                Message.error(\"Данный пользователь недоступен.\")\r\n                return;\r\n            }\r\n            this.setImageURL()\r\n        })\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\np{\r\n    margin: 0.5rem 0;\r\n}\r\n#personal-page{\r\n    width: 100%;\r\n    text-align: left;\r\n}\r\n#personal-page-top{\r\n    display:flex;\r\n}\r\n#personal-page-image{\r\n    width: 200px;\r\n    margin-bottom: 1rem;\r\n}\r\n#personal-page-text-info{\r\n    margin: 0.5rem;\r\n    text-align: left;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonalPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonalPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PersonalPage.vue?vue&type=template&id=8947d34c&scoped=true&\"\nimport script from \"./PersonalPage.vue?vue&type=script&lang=js&\"\nexport * from \"./PersonalPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PersonalPage.vue?vue&type=style&index=0&id=8947d34c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8947d34c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonalPage.vue?vue&type=style&index=0&id=8947d34c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PersonalPage.vue?vue&type=style&index=0&id=8947d34c&scoped=true&lang=css&\""],"sourceRoot":""}