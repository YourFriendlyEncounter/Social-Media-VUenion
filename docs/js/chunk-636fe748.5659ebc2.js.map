{"version":3,"sources":["webpack:///./src/views/Feed.vue?0912","webpack:///src/views/Feed.vue","webpack:///./src/views/Feed.vue?7c1e","webpack:///./src/views/Feed.vue?d1db","webpack:///./src/views/Feed.vue?dab7","webpack:///./node_modules/core-js/modules/es.array.slice.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","$event","preventDefault","newPost","directives","name","rawName","value","expression","staticClass","domProps","target","composing","newPostText","_v","_l","post","key","id","_m","_s","getAuthorById","user","lastName","getRelativeDate","dateTimeAdded","text","staticRenderFns","component","$","isObject","isArray","toAbsoluteIndex","toLength","toIndexedObject","createProperty","wellKnownSymbol","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","ACCESSORS","0","1","SPECIES","nativeSlice","slice","max","Math","proto","forced","start","end","Constructor","result","n","O","length","k","fin","undefined","constructor","Array","prototype","call"],"mappings":"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","file":"js/chunk-636fe748.5659ebc2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"feed\"}},[_c('form',{attrs:{\"id\":\"form-new-post\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.newPost($event)}}},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newPostText),expression:\"newPostText\"}],staticClass:\"input-text\",attrs:{\"id\":\"new-post-text\",\"rows\":\"3\",\"maxlength\":\"3000\",\"placeholder\":\"Что интересного можете рассказать?\"},domProps:{\"value\":(_vm.newPostText)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newPostText=$event.target.value}}}),_vm._v(\" \"),_c('input',{staticClass:\"custom-button\",attrs:{\"type\":\"submit\",\"id\":\"new-post-submit\"}})]),_vm._l((_vm.getPosts),function(post){return _c('div',{key:post.id,staticClass:\"container-white post-generic\"},[_c('div',{staticClass:\"post-author-info\"},[_vm._m(0,true),_c('div',{staticClass:\"post-author-name-date-block\"},[_c('p',[_vm._v(\" \"+_vm._s(_vm.getAuthorById(post.user).name)+\" \"+_vm._s(_vm.getAuthorById(post.user).lastName))]),_c('p',[_vm._v(\" \"+_vm._s(_vm.getRelativeDate(post.dateTimeAdded))+\" \")])])]),_c('p',{staticClass:\"post-text\"},[_vm._v(_vm._s(post.text))])])})],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"post-author-photo-block\"},[_c('img',{attrs:{\"src\":require(\"../assets/newUser.svg\"),\"width\":\"48\"}})])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div id=\"feed\">\r\n        <form id=\"form-new-post\" @submit.prevent=\"newPost\">\r\n            <textarea class=\"input-text\" \r\n            id=\"new-post-text\" \r\n            rows=\"3\" maxlength=\"3000\" \r\n            placeholder=\"Что интересного можете рассказать?\" \r\n            v-model=\"newPostText\"/>\r\n            <input type=\"submit\" id=\"new-post-submit\" class=\"custom-button\">\r\n        </form>\r\n        <div v-for=\"post in getPosts\" :key=\"post.id\" \r\n        class=\"container-white post-generic\">\r\n            <div class=\"post-author-info\" >\r\n                <div class=\"post-author-photo-block\">\r\n                    <img src=\"../assets/newUser.svg\" width=48>\r\n                </div>\r\n                <div class=\"post-author-name-date-block\">\r\n                    <p> {{ getAuthorById(post.user).name }} {{ getAuthorById(post.user).lastName }}</p>\r\n                    <p> {{ getRelativeDate(post.dateTimeAdded) }} </p>\r\n                </div>\r\n            </div>\r\n            <p class=\"post-text\">{{ post.text }}</p>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Post from '../store/post_help'\r\nimport Message from 'vue-m-message';\r\n\r\nexport default {\r\n    computed: {\r\n        getPosts() {\r\n            return this.$store.getters.getPosts.slice().reverse()\r\n        },\r\n        getAuthors() {\r\n            return this.$store.getters.getUserList;\r\n        }\r\n    },\r\n    methods: {\r\n        getAuthorById(id){\r\n            let author = null;\r\n            Object.keys(this.getAuthors).forEach(key =>{\r\n                const currentAuthor = this.getAuthors[key]\r\n                if(currentAuthor.id == id){\r\n                    author = currentAuthor;\r\n                }\r\n            })\r\n            if(author == null)\r\n            {\r\n                return {\r\n                    name: \"[Deleted]\",\r\n                    lastName: \"\"\r\n                }\r\n            }\r\n            return author;\r\n        },\r\n        newPost(){\r\n            if (this.newPostText.length < 3){\r\n                Message.error(\"Нельзя опубликовать пост, длиной менее 3 символов.\")\r\n                return;\r\n            }\r\n            const newPost = new Post(\r\n                this.newPostText,\r\n                (new Date()).toString(),\r\n                this.newPostImages,\r\n                false,\r\n                0,\r\n                0,\r\n                this.$store.getters.user.id\r\n            )\r\n            this.$store.dispatch('newPost', newPost)\r\n                .then(() => {\r\n                    this.sumbitStatus = \"ok\";\r\n                    this.$router.push('/')\r\n                    Message.success(\"Пост опубликован.\")\r\n                    this.newPostText = \"\"\r\n                    this.newPostImages = []\r\n                })\r\n                .catch(err => {\r\n                    this.sumbitStatus = err.message\r\n                })\r\n        },\r\n        getRelativeDate(date){\r\n            let postPublishDate = new Date(date);\r\n            let currentDateInMinutes = new Date();\r\n\r\n            let dateDiff = currentDateInMinutes - postPublishDate;\r\n            let suffix = \" мин. назад\"\r\n\r\n            dateDiff = Math.round((dateDiff/1000)/60);\r\n\r\n            if(dateDiff >= 60){\r\n                dateDiff /= 60;\r\n                dateDiff = Math.floor(dateDiff);\r\n                suffix = \" ч. назад\";\r\n                if(dateDiff >= 24){\r\n                    return postPublishDate.getDate() + \".\"\r\n                    + (postPublishDate.getMonth() + 1) + \".\"\r\n                    + postPublishDate.getFullYear() + \" \"\r\n                    + postPublishDate.getHours() + \":\"\r\n                    + postPublishDate.getMinutes();\r\n                }\r\n            }\r\n            else if(dateDiff === 0){\r\n                return \"Только что\";\r\n            }\r\n            return dateDiff + suffix;\r\n        }\r\n    },\r\n    data(){\r\n        return {\r\n            newPostText: \"\",\r\n            newPostImages: [],\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#feed{\r\n    width: 100%;\r\n    height: 100%;\r\n    margin-bottom: 1rem;\r\n}\r\n#form-new-post{\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: flex-end;\r\n}\r\n#new-post-text{\r\n    width: 100%;\r\n    resize: none;\r\n    height: auto;\r\n}\r\n#new-post-submit{\r\n    margin: 0.4rem 0;\r\n}\r\n.post-generic{\r\n    margin-bottom: 1rem;\r\n    padding: 0.25rem 0.25rem;\r\n    text-align: left;\r\n}\r\n.post-author-info{\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n.post-author-photo-block img{\r\n    margin-right: .5rem;\r\n}\r\n.post-text{\r\n    overflow-wrap: break-word;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Feed.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Feed.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Feed.vue?vue&type=template&id=32990e89&scoped=true&\"\nimport script from \"./Feed.vue?vue&type=script&lang=js&\"\nexport * from \"./Feed.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Feed.vue?vue&type=style&index=0&id=32990e89&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"32990e89\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Feed.vue?vue&type=style&index=0&id=32990e89&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Feed.vue?vue&type=style&index=0&id=32990e89&scoped=true&lang=css&\"","'use strict';\nvar $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('slice', { ACCESSORS: true, 0: 0, 1: 2 });\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = toLength(O.length);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (typeof Constructor == 'function' && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n"],"sourceRoot":""}